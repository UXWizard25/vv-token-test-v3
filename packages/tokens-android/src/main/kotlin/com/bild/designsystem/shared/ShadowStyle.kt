/**
 * Do not edit directly, this file was auto-generated.
 *
 * BILD Design System Tokens v1.0.0
 * Generated by Style Dictionary v5.1.4
 *
 * Context: ShadowStyle - Composite shadow token (multiple layers)
 *
 * Copyright (c) 2026 Axel Springer Deutschland GmbH
 * Proprietary and confidential. All rights reserved.
 *
 * Documentation: https://github.com/UXWizard25/bild-design-system/blob/main/packages/tokens-android/docs/USAGE.md
 */

package com.bild.designsystem.shared

import androidx.compose.runtime.Immutable
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.drawBehind
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.Paint
import androidx.compose.ui.graphics.drawscope.drawIntoCanvas
import androidx.compose.ui.graphics.toArgb
import androidx.compose.ui.unit.dp

/**
 * Composite shadow style containing multiple shadow layers
 *
 * Usage:
 * ```kotlin
 * Box(
 *     modifier = Modifier
 *         .then(DesignSystemTheme.effects.shadowSoftMd.toModifier())
 *         .background(Color.White)
 * )
 * ```
 */
@Immutable
data class ShadowStyle(
    val layers: List<DropShadow>
) {
    constructor(vararg shadows: DropShadow) : this(shadows.toList())

    /**
     * Converts this ShadowStyle to a Compose Modifier
     *
     * Applies all shadow layers using drawBehind with native shadow rendering.
     * Note: For best results, apply this modifier before background modifiers.
     *
     * @return A Modifier that renders all shadow layers
     */
    fun toModifier(): Modifier = Modifier.drawBehind {
        layers.forEach { shadow ->
            drawIntoCanvas { canvas ->
                val paint = Paint().apply {
                    color = shadow.color
                    asFrameworkPaint().apply {
                        setShadowLayer(
                            shadow.blur,
                            shadow.offsetX,
                            shadow.offsetY,
                            shadow.color.toArgb()
                        )
                    }
                }
                // Draw a rect slightly larger than the content to show the shadow
                canvas.drawRect(
                    left = -shadow.spread,
                    top = -shadow.spread,
                    right = size.width + shadow.spread,
                    bottom = size.height + shadow.spread,
                    paint = paint
                )
            }
        }
    }
}
